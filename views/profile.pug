extends base

block TopBar
    include widgets/_topBar

    block MainContent
        .container-fluid
            .d-sm-flex.align-items-center.justify-content-between.mb-4
                h1.h3.mb-0.text-gray-800 Profile | #{user.firstName} #{user.lastName} 
            .row
                .col-xl-8.col-lg-7
                    .card.shadow.mb-4
                        .card-header.py-3.d-flex.flex-row.align-items-center.justify-content-between
                            h6.m-0.font-weight-bold.text-primary My Profile
                        .card-body
                            form.profile-form
                                .form-group.row
                                    label.col-sm-2.col-form-label(for='full_name') Full Name
                                    .col-sm-10
                                        input.form-control-plaintext(type='text' readonly='' name='fullName' id='fullName' value= `${user.firstName} ${user.lastName}` )
                                .form-group.row
                                    label.col-sm-2.col-form-label(for='email') Email
                                    .col-sm-10
                                        input.form-control-plaintext(type='text' name='email' id='email' readonly='' value=`${user.email}`)
                                .form-group.row
                                    label.col-sm-2.col-form-label(for='phone_number') Phone Number
                                    .col-sm-10
                                        if !user.phoneNumber 
                                            input.form-control(type='text' name='phoneNumber' id='phoneNumber' value='')
                                        else
                                            input.form-control(type='text' name='phoneNumber' id='phoneNumber' value=`${user.phoneNumber}`)

                                .form-group.row
                                    label.col-sm-2.col-form-label(for='address') Address
                                    .col-sm-10
                                        if !user.address
                                            input.form-control(type='text' name='address' id='address' value='')
                                        else    
                                            input.form-control(type='text' name='address' id='address' value=`${user.address}`)


                                fieldset.form-group
                                    .row
                                        legend.col-sm-2.col-form-label
                                            | User Type 
                                        .col-sm-10
                                            - var check = 'checked'
                                            if user.role === 'member' 
                                                .form-check
                                                    input#gridRadios1.form-check-input(type='radio' name='userType' onclick="showHidePan('member')" checked=`${check}`)
                                                    label.form-check-label(for='member' )
                                                        | Member
                                                .form-check
                                                    input#gridRadios2.form-check-input(type='radio' name='userType' onclick="showHidePan('gymOwner')" )
                                                    label.form-check-label(for='gymOwner' )
                                                        | Gym Owner
                                            else
                                                .form-check
                                                    input#gridRadios1.form-check-input(type='radio' name='userType' onclick="showHidePan('member')" )
                                                    label.form-check-label(for='member' )
                                                        | Member
                                                .form-check
                                                    input#gridRadios2.form-check-input(type='radio' name='userType' onclick="showHidePan('gymOwner')" checked = `${check}`)
                                                    label.form-check-label(for='gymOwner' )
                                                        | Gym Owner
                            if user.role === 'member'
                                #panBlock.form-group.row(style='display:none;')
                                    label.col-sm-2.col-form-label(for='pan_vat_number') PAN-VAT Number
                                    .col-sm-10
                                        input.form-control(type='text' name='panVatNumber' id='panVatNumber' )
                            else 
                                #panBlock.form-group.row
                                    label.col-sm-2.col-form-label(for='pan_vat_number') PAN-VAT Number
                                    .col-sm-10
                                        input.form-control(type='text' name='panVatNumber' id='panVatNumber' value=`${user.panVatNumber}`)


                                .form-group.row
                                    label.col-sm-2.col-form-label(for='status') Status
                                    .col-sm-10
                                        input.form-control-plaintext(type='text' readonly='' name='status' id='status' value='Active')

                                form.group
                                    button.btn.btn-primary.btn-user.btn-block(type='submit')  Update Profile 


                .col-xl-4.col-lg-5
                    .card.shadow.mb-4

                        .card-header.py-3.d-flex.flex-row.align-items-center.justify-content-between
                            h6.m-0.font-weight-bold.text-primary Upload Profile Image

                        .card-body
                            div(align='center')
                                i.fas.fa-10x.fa-user-circle
                                hr
                                form(action='/profile/image' enctype='multipart/form-data' method='POST')
                                    input(type='hidden' name='csrfmiddlewaretoken' value='5diWQ6C0NUUz6dbebMA8uZhnTACp2ZWzxcK1gRV2rCeLX8oBfAxvmJMtJD2fnk2O')
                                    input#exampleFormControlFile1.form-control-file(type='file' name='image')
                                    input(type='hidden' name='user_id' value='1')
                                    hr
                                    br
                                    button.btn.btn-primary.btn-user.btn-block(type='submit')  Update Profile Image 

    block footer    
        include widgets/_footer
    script(type='module' src='/js/updateProfile.js')
    script.
        function showHidePan(userType) {
        if (userType === "member") {
        document.getElementById("panBlock").style.display = "none";
        } else if (userType === "gymOwner") {
        document.getElementById("panBlock").style.display = "flex";
        }
        }


